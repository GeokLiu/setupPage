{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nggeo\\\\fullstack-jamaibase-app\\\\frontend\\\\src\\\\pages\\\\SignUpVoice.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext } from \"react\";\nimport { Box, Typography, Button } from \"@mui/material\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport { LanguageContext } from \"../context/LanguageContext\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst translations = {\n  BM: {\n    recordVoice: \"Rakam Suara Anda\",\n    next: \"Seterusnya\"\n  },\n  BI: {\n    recordVoice: \"Record Your Voice\",\n    next: \"Next\"\n  }\n};\nconst SignUpVoice = () => {\n  _s();\n  var _location$state;\n  const navigate = useNavigate();\n  const {\n    language\n  } = useContext(LanguageContext);\n\n  // Receive IC number from signup-step1\n  const location = useLocation();\n  const icNumber = (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.icNumber;\n  if (!icNumber) navigate(\"/signup-step1\"); // fallback if no IC\n\n  const [voiceText, setVoiceText] = useState(\"\");\n  const [recording, setRecording] = useState(false);\n  const handleStartRecording = () => {\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    if (!SpeechRecognition) {\n      alert(\"Your browser does not support voice recording.\");\n      return;\n    }\n    const recognition = new SpeechRecognition();\n    recognition.lang = language === \"BM\" ? \"ms-MY\" : \"en-US\";\n    recognition.interimResults = false;\n    recognition.maxAlternatives = 1;\n    recognition.onstart = () => setRecording(true);\n    recognition.onresult = event => {\n      const transcript = event.results[0][0].transcript;\n      setVoiceText(transcript);\n      setRecording(false);\n    };\n    recognition.onerror = event => {\n      console.error(event.error);\n      setRecording(false);\n    };\n    recognition.start();\n  };\n  const handleNext = async () => {\n    if (!voiceText) return alert(language === \"BM\" ? \"Sila rakam suara anda\" : \"Please record your voice\");\n    try {\n      await axios.post(\"http://localhost:8000/signup-voice\", {\n        ic_number: icNumber,\n        voice_text: voiceText\n      });\n      navigate(\"/signup-security\", {\n        state: {\n          icNumber\n        }\n      });\n    } catch (err) {\n      console.error(err);\n      alert(language === \"BM\" ? \"Gagal menyimpan suara. Cuba lagi.\" : \"Failed to save voice. Try again.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    textAlign: \"center\",\n    mt: 5,\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h4\",\n      children: translations[language].recordVoice\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      mt: 3,\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        onClick: handleStartRecording,\n        disabled: recording,\n        children: recording ? \"Recording...\" : translations[language].recordVoice\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Recorded Text: \", voiceText]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      mt: 3,\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        onClick: handleNext,\n        disabled: !voiceText,\n        children: translations[language].next\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 9\n  }, this);\n};\n_s(SignUpVoice, \"ELKj8SEgSFcTcJAEsNZurSqzcQ4=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = SignUpVoice;\nexport default SignUpVoice;\nvar _c;\n$RefreshReg$(_c, \"SignUpVoice\");","map":{"version":3,"names":["React","useState","useContext","Box","Typography","Button","useNavigate","useLocation","LanguageContext","axios","jsxDEV","_jsxDEV","translations","BM","recordVoice","next","BI","SignUpVoice","_s","_location$state","navigate","language","location","icNumber","state","voiceText","setVoiceText","recording","setRecording","handleStartRecording","SpeechRecognition","window","webkitSpeechRecognition","alert","recognition","lang","interimResults","maxAlternatives","onstart","onresult","event","transcript","results","onerror","console","error","start","handleNext","post","ic_number","voice_text","err","textAlign","mt","children","variant","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","_c","$RefreshReg$"],"sources":["C:/Users/nggeo/fullstack-jamaibase-app/frontend/src/pages/SignUpVoice.tsx"],"sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport { Box, Typography, Button } from \"@mui/material\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport { LanguageContext } from \"../context/LanguageContext\";\r\nimport axios from \"axios\";\r\n\r\nconst translations = {\r\n    BM: { recordVoice: \"Rakam Suara Anda\", next: \"Seterusnya\" },\r\n    BI: { recordVoice: \"Record Your Voice\", next: \"Next\" },\r\n};\r\n\r\nconst SignUpVoice: React.FC = () => {\r\n    const navigate = useNavigate();\r\n    const { language } = useContext(LanguageContext);\r\n\r\n    // Receive IC number from signup-step1\r\n    const location = useLocation();\r\n    const icNumber = (location.state as any)?.icNumber;\r\n    if (!icNumber) navigate(\"/signup-step1\"); // fallback if no IC\r\n\r\n    const [voiceText, setVoiceText] = useState(\"\");\r\n    const [recording, setRecording] = useState(false);\r\n\r\n    const handleStartRecording = () => {\r\n        const SpeechRecognition = (window as any).SpeechRecognition || (window as any).webkitSpeechRecognition;\r\n        if (!SpeechRecognition) {\r\n            alert(\"Your browser does not support voice recording.\");\r\n            return;\r\n        }\r\n        const recognition = new SpeechRecognition();\r\n        recognition.lang = language === \"BM\" ? \"ms-MY\" : \"en-US\";\r\n        recognition.interimResults = false;\r\n        recognition.maxAlternatives = 1;\r\n\r\n        recognition.onstart = () => setRecording(true);\r\n        recognition.onresult = (event: any) => {\r\n            const transcript = event.results[0][0].transcript;\r\n            setVoiceText(transcript);\r\n            setRecording(false);\r\n        };\r\n        recognition.onerror = (event: any) => {\r\n            console.error(event.error);\r\n            setRecording(false);\r\n        };\r\n        recognition.start();\r\n    };\r\n\r\n    const handleNext = async () => {\r\n        if (!voiceText) return alert(language === \"BM\" ? \"Sila rakam suara anda\" : \"Please record your voice\");\r\n\r\n        try {\r\n            await axios.post(\"http://localhost:8000/signup-voice\", { ic_number: icNumber, voice_text: voiceText });\r\n            navigate(\"/signup-security\", { state: { icNumber } });\r\n        } catch (err) {\r\n            console.error(err);\r\n            alert(language === \"BM\" ? \"Gagal menyimpan suara. Cuba lagi.\" : \"Failed to save voice. Try again.\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Box textAlign=\"center\" mt={5}>\r\n            <Typography variant=\"h4\">{translations[language].recordVoice}</Typography>\r\n            <Box mt={3}>\r\n                <Button variant=\"contained\" onClick={handleStartRecording} disabled={recording}>\r\n                    {recording ? \"Recording...\" : translations[language].recordVoice}\r\n                </Button>\r\n            </Box>\r\n            <p>Recorded Text: {voiceText}</p>\r\n            <Box mt={3}>\r\n                <Button variant=\"contained\" onClick={handleNext} disabled={!voiceText}>\r\n                    {translations[language].next}\r\n                </Button>\r\n            </Box>\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default SignUpVoice;\r\n\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,UAAU,QAAQ,OAAO;AACnD,SAASC,GAAG,EAAEC,UAAU,EAAEC,MAAM,QAAQ,eAAe;AACvD,SAASC,WAAW,EAAEC,WAAW,QAAQ,kBAAkB;AAC3D,SAASC,eAAe,QAAQ,4BAA4B;AAC5D,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,MAAMC,YAAY,GAAG;EACjBC,EAAE,EAAE;IAAEC,WAAW,EAAE,kBAAkB;IAAEC,IAAI,EAAE;EAAa,CAAC;EAC3DC,EAAE,EAAE;IAAEF,WAAW,EAAE,mBAAmB;IAAEC,IAAI,EAAE;EAAO;AACzD,CAAC;AAED,MAAME,WAAqB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAAA,IAAAC,eAAA;EAChC,MAAMC,QAAQ,GAAGd,WAAW,CAAC,CAAC;EAC9B,MAAM;IAAEe;EAAS,CAAC,GAAGnB,UAAU,CAACM,eAAe,CAAC;;EAEhD;EACA,MAAMc,QAAQ,GAAGf,WAAW,CAAC,CAAC;EAC9B,MAAMgB,QAAQ,IAAAJ,eAAA,GAAIG,QAAQ,CAACE,KAAK,cAAAL,eAAA,uBAAfA,eAAA,CAAyBI,QAAQ;EAClD,IAAI,CAACA,QAAQ,EAAEH,QAAQ,CAAC,eAAe,CAAC,CAAC,CAAC;;EAE1C,MAAM,CAACK,SAAS,EAAEC,YAAY,CAAC,GAAGzB,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAAC0B,SAAS,EAAEC,YAAY,CAAC,GAAG3B,QAAQ,CAAC,KAAK,CAAC;EAEjD,MAAM4B,oBAAoB,GAAGA,CAAA,KAAM;IAC/B,MAAMC,iBAAiB,GAAIC,MAAM,CAASD,iBAAiB,IAAKC,MAAM,CAASC,uBAAuB;IACtG,IAAI,CAACF,iBAAiB,EAAE;MACpBG,KAAK,CAAC,gDAAgD,CAAC;MACvD;IACJ;IACA,MAAMC,WAAW,GAAG,IAAIJ,iBAAiB,CAAC,CAAC;IAC3CI,WAAW,CAACC,IAAI,GAAGd,QAAQ,KAAK,IAAI,GAAG,OAAO,GAAG,OAAO;IACxDa,WAAW,CAACE,cAAc,GAAG,KAAK;IAClCF,WAAW,CAACG,eAAe,GAAG,CAAC;IAE/BH,WAAW,CAACI,OAAO,GAAG,MAAMV,YAAY,CAAC,IAAI,CAAC;IAC9CM,WAAW,CAACK,QAAQ,GAAIC,KAAU,IAAK;MACnC,MAAMC,UAAU,GAAGD,KAAK,CAACE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACD,UAAU;MACjDf,YAAY,CAACe,UAAU,CAAC;MACxBb,YAAY,CAAC,KAAK,CAAC;IACvB,CAAC;IACDM,WAAW,CAACS,OAAO,GAAIH,KAAU,IAAK;MAClCI,OAAO,CAACC,KAAK,CAACL,KAAK,CAACK,KAAK,CAAC;MAC1BjB,YAAY,CAAC,KAAK,CAAC;IACvB,CAAC;IACDM,WAAW,CAACY,KAAK,CAAC,CAAC;EACvB,CAAC;EAED,MAAMC,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC3B,IAAI,CAACtB,SAAS,EAAE,OAAOQ,KAAK,CAACZ,QAAQ,KAAK,IAAI,GAAG,uBAAuB,GAAG,0BAA0B,CAAC;IAEtG,IAAI;MACA,MAAMZ,KAAK,CAACuC,IAAI,CAAC,oCAAoC,EAAE;QAAEC,SAAS,EAAE1B,QAAQ;QAAE2B,UAAU,EAAEzB;MAAU,CAAC,CAAC;MACtGL,QAAQ,CAAC,kBAAkB,EAAE;QAAEI,KAAK,EAAE;UAAED;QAAS;MAAE,CAAC,CAAC;IACzD,CAAC,CAAC,OAAO4B,GAAG,EAAE;MACVP,OAAO,CAACC,KAAK,CAACM,GAAG,CAAC;MAClBlB,KAAK,CAACZ,QAAQ,KAAK,IAAI,GAAG,mCAAmC,GAAG,kCAAkC,CAAC;IACvG;EACJ,CAAC;EAED,oBACIV,OAAA,CAACR,GAAG;IAACiD,SAAS,EAAC,QAAQ;IAACC,EAAE,EAAE,CAAE;IAAAC,QAAA,gBAC1B3C,OAAA,CAACP,UAAU;MAACmD,OAAO,EAAC,IAAI;MAAAD,QAAA,EAAE1C,YAAY,CAACS,QAAQ,CAAC,CAACP;IAAW;MAAA0C,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAa,CAAC,eAC1EhD,OAAA,CAACR,GAAG;MAACkD,EAAE,EAAE,CAAE;MAAAC,QAAA,eACP3C,OAAA,CAACN,MAAM;QAACkD,OAAO,EAAC,WAAW;QAACK,OAAO,EAAE/B,oBAAqB;QAACgC,QAAQ,EAAElC,SAAU;QAAA2B,QAAA,EAC1E3B,SAAS,GAAG,cAAc,GAAGf,YAAY,CAACS,QAAQ,CAAC,CAACP;MAAW;QAAA0C,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC5D;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACR,CAAC,eACNhD,OAAA;MAAA2C,QAAA,GAAG,iBAAe,EAAC7B,SAAS;IAAA;MAAA+B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACjChD,OAAA,CAACR,GAAG;MAACkD,EAAE,EAAE,CAAE;MAAAC,QAAA,eACP3C,OAAA,CAACN,MAAM;QAACkD,OAAO,EAAC,WAAW;QAACK,OAAO,EAAEb,UAAW;QAACc,QAAQ,EAAE,CAACpC,SAAU;QAAA6B,QAAA,EACjE1C,YAAY,CAACS,QAAQ,CAAC,CAACN;MAAI;QAAAyC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxB;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACR,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEd,CAAC;AAACzC,EAAA,CAhEID,WAAqB;EAAA,QACNX,WAAW,EAIXC,WAAW;AAAA;AAAAuD,EAAA,GAL1B7C,WAAqB;AAkE3B,eAAeA,WAAW;AAAC,IAAA6C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}