{"ast":null,"code":"// FILE: frontend/src/services/api.ts\nimport axios from 'axios';\n\n// Ensure this matches your Python Backend URL\nconst API_URL = \"http://localhost:8000\";\n\n// 1. extractICData: Sends front/back images to Python OCR\nexport const extractICData = async (frontFile, backFile) => {\n  const formData = new FormData();\n  formData.append(\"front_image\", frontFile);\n  formData.append(\"back_image\", backFile);\n\n  // Matches the @app.post(\"/api/ocr/extract\") in main.py\n  const response = await axios.post(`${API_URL}/api/ocr/extract`, formData, {\n    headers: {\n      'Content-Type': 'multipart/form-data'\n    }\n  });\n  return response.data;\n};\n\n// 2. signupUser: Sends final registration details\nexport const signupUser = async formData => {\n  return await axios.post(`${API_URL}/signup-finalize`, formData, {\n    headers: {\n      'Content-Type': 'multipart/form-data'\n    }\n  });\n};\n\n// 3. initiateLogin: Step 1 of login (Get Security Question)\nexport const initiateLogin = async icNumber => {\n  const formData = new FormData();\n  formData.append(\"icNumber\", icNumber);\n  try {\n    const res = await axios.post(`${API_URL}/login/initiate`, formData);\n    return res.data;\n  } catch (err) {\n    var _err$response, _err$response$data;\n    return {\n      success: false,\n      message: ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.detail) || \"Error\"\n    };\n  }\n};\n\n// 4. verifyLogin: Step 2 of login (Verify Answer)\nexport const verifyLogin = async (icNumber, question, answer) => {\n  const formData = new FormData();\n  formData.append(\"icNumber\", icNumber);\n  formData.append(\"question\", question);\n  formData.append(\"answer\", answer);\n  try {\n    const res = await axios.post(`${API_URL}/login/verify`, formData);\n    return res.data;\n  } catch (err) {\n    return {\n      success: false,\n      message: \"Verification failed\"\n    };\n  }\n};","map":{"version":3,"names":["axios","API_URL","extractICData","frontFile","backFile","formData","FormData","append","response","post","headers","data","signupUser","initiateLogin","icNumber","res","err","_err$response","_err$response$data","success","message","detail","verifyLogin","question","answer"],"sources":["C:/Users/nggeo/fullstack-jamaibase-app/frontend/src/services/api.ts"],"sourcesContent":["// FILE: frontend/src/services/api.ts\r\nimport axios from 'axios';\r\n\r\n// Ensure this matches your Python Backend URL\r\nconst API_URL = \"http://localhost:8000\";\r\n\r\n// 1. extractICData: Sends front/back images to Python OCR\r\nexport const extractICData = async (frontFile: File, backFile: File) => {\r\n    const formData = new FormData();\r\n    formData.append(\"front_image\", frontFile);\r\n    formData.append(\"back_image\", backFile);\r\n\r\n    // Matches the @app.post(\"/api/ocr/extract\") in main.py\r\n    const response = await axios.post(`${API_URL}/api/ocr/extract`, formData, {\r\n        headers: { 'Content-Type': 'multipart/form-data' }\r\n    });\r\n    return response.data;\r\n};\r\n\r\n// 2. signupUser: Sends final registration details\r\nexport const signupUser = async (formData: FormData) => {\r\n    return await axios.post(`${API_URL}/signup-finalize`, formData, {\r\n        headers: { 'Content-Type': 'multipart/form-data' }\r\n    });\r\n};\r\n\r\n// 3. initiateLogin: Step 1 of login (Get Security Question)\r\nexport const initiateLogin = async (icNumber: string) => {\r\n    const formData = new FormData();\r\n    formData.append(\"icNumber\", icNumber);\r\n    try {\r\n        const res = await axios.post(`${API_URL}/login/initiate`, formData);\r\n        return res.data;\r\n    } catch (err: any) {\r\n        return { success: false, message: err.response?.data?.detail || \"Error\" };\r\n    }\r\n};\r\n\r\n// 4. verifyLogin: Step 2 of login (Verify Answer)\r\nexport const verifyLogin = async (icNumber: string, question: string, answer: string) => {\r\n    const formData = new FormData();\r\n    formData.append(\"icNumber\", icNumber);\r\n    formData.append(\"question\", question);\r\n    formData.append(\"answer\", answer);\r\n\r\n    try {\r\n        const res = await axios.post(`${API_URL}/login/verify`, formData);\r\n        return res.data;\r\n    } catch (err: any) {\r\n        return { success: false, message: \"Verification failed\" };\r\n    }\r\n};"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA,MAAMC,OAAO,GAAG,uBAAuB;;AAEvC;AACA,OAAO,MAAMC,aAAa,GAAG,MAAAA,CAAOC,SAAe,EAAEC,QAAc,KAAK;EACpE,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;EAC/BD,QAAQ,CAACE,MAAM,CAAC,aAAa,EAAEJ,SAAS,CAAC;EACzCE,QAAQ,CAACE,MAAM,CAAC,YAAY,EAAEH,QAAQ,CAAC;;EAEvC;EACA,MAAMI,QAAQ,GAAG,MAAMR,KAAK,CAACS,IAAI,CAAC,GAAGR,OAAO,kBAAkB,EAAEI,QAAQ,EAAE;IACtEK,OAAO,EAAE;MAAE,cAAc,EAAE;IAAsB;EACrD,CAAC,CAAC;EACF,OAAOF,QAAQ,CAACG,IAAI;AACxB,CAAC;;AAED;AACA,OAAO,MAAMC,UAAU,GAAG,MAAOP,QAAkB,IAAK;EACpD,OAAO,MAAML,KAAK,CAACS,IAAI,CAAC,GAAGR,OAAO,kBAAkB,EAAEI,QAAQ,EAAE;IAC5DK,OAAO,EAAE;MAAE,cAAc,EAAE;IAAsB;EACrD,CAAC,CAAC;AACN,CAAC;;AAED;AACA,OAAO,MAAMG,aAAa,GAAG,MAAOC,QAAgB,IAAK;EACrD,MAAMT,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;EAC/BD,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAEO,QAAQ,CAAC;EACrC,IAAI;IACA,MAAMC,GAAG,GAAG,MAAMf,KAAK,CAACS,IAAI,CAAC,GAAGR,OAAO,iBAAiB,EAAEI,QAAQ,CAAC;IACnE,OAAOU,GAAG,CAACJ,IAAI;EACnB,CAAC,CAAC,OAAOK,GAAQ,EAAE;IAAA,IAAAC,aAAA,EAAAC,kBAAA;IACf,OAAO;MAAEC,OAAO,EAAE,KAAK;MAAEC,OAAO,EAAE,EAAAH,aAAA,GAAAD,GAAG,CAACR,QAAQ,cAAAS,aAAA,wBAAAC,kBAAA,GAAZD,aAAA,CAAcN,IAAI,cAAAO,kBAAA,uBAAlBA,kBAAA,CAAoBG,MAAM,KAAI;IAAQ,CAAC;EAC7E;AACJ,CAAC;;AAED;AACA,OAAO,MAAMC,WAAW,GAAG,MAAAA,CAAOR,QAAgB,EAAES,QAAgB,EAAEC,MAAc,KAAK;EACrF,MAAMnB,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;EAC/BD,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAEO,QAAQ,CAAC;EACrCT,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAEgB,QAAQ,CAAC;EACrClB,QAAQ,CAACE,MAAM,CAAC,QAAQ,EAAEiB,MAAM,CAAC;EAEjC,IAAI;IACA,MAAMT,GAAG,GAAG,MAAMf,KAAK,CAACS,IAAI,CAAC,GAAGR,OAAO,eAAe,EAAEI,QAAQ,CAAC;IACjE,OAAOU,GAAG,CAACJ,IAAI;EACnB,CAAC,CAAC,OAAOK,GAAQ,EAAE;IACf,OAAO;MAAEG,OAAO,EAAE,KAAK;MAAEC,OAAO,EAAE;IAAsB,CAAC;EAC7D;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}