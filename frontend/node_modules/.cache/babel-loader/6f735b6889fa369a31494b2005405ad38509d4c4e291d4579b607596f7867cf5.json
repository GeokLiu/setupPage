{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nggeo\\\\fullstack-jamaibase-app\\\\frontend\\\\src\\\\pages\\\\SignIn.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext } from \"react\";\nimport { Box, Typography, Button, TextField } from \"@mui/material\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { LanguageContext } from \"../context/LanguageContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst translations = {\n  BM: {\n    title: \"Log Masuk\",\n    ic: \"No. IC\",\n    recordVoice: \"Rakam Suara Anda\",\n    signin: \"Log Masuk\"\n  },\n  BI: {\n    title: \"Sign In\",\n    ic: \"IC Number\",\n    recordVoice: \"Record Your Voice\",\n    signin: \"Sign In\"\n  }\n};\nconst SignIn = () => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    language\n  } = useContext(LanguageContext);\n  const [icNumber, setIcNumber] = useState(\"\");\n  const [voiceText, setVoiceText] = useState(\"\");\n  const [recording, setRecording] = useState(false);\n  const handleStartRecording = () => {\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    if (!SpeechRecognition) {\n      alert(\"Your browser does not support voice recording.\");\n      return;\n    }\n    const recognition = new SpeechRecognition();\n    recognition.lang = language === \"BM\" ? \"ms-MY\" : \"en-US\";\n    recognition.interimResults = false;\n    recognition.maxAlternatives = 1;\n    recognition.onstart = () => setRecording(true);\n    recognition.onresult = event => {\n      const transcript = event.results[0][0].transcript;\n      setVoiceText(transcript);\n      setRecording(false);\n    };\n    recognition.onerror = event => {\n      console.error(event.error);\n      setRecording(false);\n    };\n    recognition.start();\n  };\n  const handleLogin = async () => {\n    if (!icNumber) return alert(\"Please enter your IC number.\");\n    if (!voiceText) return alert(\"Please record your voice.\");\n    try {\n      const res = await axios.post(\"http://localhost:8000/login\", {\n        ic_number: icNumber,\n        voice_text: voiceText\n      });\n      alert(language === \"BM\" ? \"Berjaya log masuk!\" : \"Login successful!\");\n      navigate(\"/dashboard\"); // change to your app dashboard route\n    } catch (err) {\n      var _err$response, _err$response2;\n      if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 404) {\n        alert(language === \"BM\" ? \"Pengguna tidak ditemui! Sila daftar.\" : \"User not found! Redirecting to signup.\");\n        navigate(\"/signup-step1\");\n      } else if (((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.status) === 401) {\n        alert(language === \"BM\" ? \"Suara tidak sepadan. Jawab soalan keselamatan.\" : \"Voice mismatch. Answer security questions.\");\n        navigate(\"/login-security\", {\n          state: {\n            icNumber\n          }\n        }); // implement security page\n      } else {\n        alert(language === \"BM\" ? \"Log masuk gagal. Cuba lagi.\" : \"Login failed. Try again.\");\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    textAlign: \"center\",\n    mt: 5,\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h4\",\n      children: translations[language].title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(TextField, {\n      label: translations[language].ic,\n      value: icNumber,\n      onChange: e => setIcNumber(e.target.value),\n      sx: {\n        mt: 2\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      mt: 2,\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        onClick: handleStartRecording,\n        disabled: recording,\n        children: recording ? \"Recording...\" : translations[language].recordVoice\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Recorded Text: \", voiceText]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      mt: 3,\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        onClick: handleLogin,\n        children: translations[language].signin\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n};\n_s(SignIn, \"BlyEn0yuTfYKkvt/danUls9Kaak=\", false, function () {\n  return [useNavigate];\n});\n_c = SignIn;\nexport default SignIn;\nvar _c;\n$RefreshReg$(_c, \"SignIn\");","map":{"version":3,"names":["React","useState","useContext","Box","Typography","Button","TextField","useNavigate","axios","LanguageContext","jsxDEV","_jsxDEV","translations","BM","title","ic","recordVoice","signin","BI","SignIn","_s","navigate","language","icNumber","setIcNumber","voiceText","setVoiceText","recording","setRecording","handleStartRecording","SpeechRecognition","window","webkitSpeechRecognition","alert","recognition","lang","interimResults","maxAlternatives","onstart","onresult","event","transcript","results","onerror","console","error","start","handleLogin","res","post","ic_number","voice_text","err","_err$response","_err$response2","response","status","state","textAlign","mt","children","variant","fileName","_jsxFileName","lineNumber","columnNumber","label","value","onChange","e","target","sx","onClick","disabled","_c","$RefreshReg$"],"sources":["C:/Users/nggeo/fullstack-jamaibase-app/frontend/src/pages/SignIn.tsx"],"sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport { Box, Typography, Button, TextField } from \"@mui/material\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { LanguageContext } from \"../context/LanguageContext\";\r\n\r\nconst translations = {\r\n    BM: { title: \"Log Masuk\", ic: \"No. IC\", recordVoice: \"Rakam Suara Anda\", signin: \"Log Masuk\" },\r\n    BI: { title: \"Sign In\", ic: \"IC Number\", recordVoice: \"Record Your Voice\", signin: \"Sign In\" },\r\n};\r\n\r\nconst SignIn: React.FC = () => {\r\n    const navigate = useNavigate();\r\n    const { language } = useContext(LanguageContext);\r\n\r\n    const [icNumber, setIcNumber] = useState(\"\");\r\n    const [voiceText, setVoiceText] = useState(\"\");\r\n    const [recording, setRecording] = useState(false);\r\n\r\n    const handleStartRecording = () => {\r\n        const SpeechRecognition = (window as any).SpeechRecognition || (window as any).webkitSpeechRecognition;\r\n        if (!SpeechRecognition) {\r\n            alert(\"Your browser does not support voice recording.\");\r\n            return;\r\n        }\r\n        const recognition = new SpeechRecognition();\r\n        recognition.lang = language === \"BM\" ? \"ms-MY\" : \"en-US\";\r\n        recognition.interimResults = false;\r\n        recognition.maxAlternatives = 1;\r\n\r\n        recognition.onstart = () => setRecording(true);\r\n        recognition.onresult = (event: any) => {\r\n            const transcript = event.results[0][0].transcript;\r\n            setVoiceText(transcript);\r\n            setRecording(false);\r\n        };\r\n        recognition.onerror = (event: any) => {\r\n            console.error(event.error);\r\n            setRecording(false);\r\n        };\r\n        recognition.start();\r\n    };\r\n\r\n    const handleLogin = async () => {\r\n        if (!icNumber) return alert(\"Please enter your IC number.\");\r\n        if (!voiceText) return alert(\"Please record your voice.\");\r\n\r\n        try {\r\n            const res = await axios.post(\"http://localhost:8000/login\", {\r\n                ic_number: icNumber,\r\n                voice_text: voiceText,\r\n            });\r\n            alert(language === \"BM\" ? \"Berjaya log masuk!\" : \"Login successful!\");\r\n            navigate(\"/dashboard\"); // change to your app dashboard route\r\n        } catch (err: any) {\r\n            if (err.response?.status === 404) {\r\n                alert(language === \"BM\" ? \"Pengguna tidak ditemui! Sila daftar.\" : \"User not found! Redirecting to signup.\");\r\n                navigate(\"/signup-step1\");\r\n            } else if (err.response?.status === 401) {\r\n                alert(language === \"BM\" ? \"Suara tidak sepadan. Jawab soalan keselamatan.\" : \"Voice mismatch. Answer security questions.\");\r\n                navigate(\"/login-security\", { state: { icNumber } }); // implement security page\r\n            } else {\r\n                alert(language === \"BM\" ? \"Log masuk gagal. Cuba lagi.\" : \"Login failed. Try again.\");\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Box textAlign=\"center\" mt={5}>\r\n            <Typography variant=\"h4\">{translations[language].title}</Typography>\r\n            <TextField\r\n                label={translations[language].ic}\r\n                value={icNumber}\r\n                onChange={(e) => setIcNumber(e.target.value)}\r\n                sx={{ mt: 2 }}\r\n            />\r\n            <Box mt={2}>\r\n                <Button variant=\"contained\" onClick={handleStartRecording} disabled={recording}>\r\n                    {recording ? \"Recording...\" : translations[language].recordVoice}\r\n                </Button>\r\n            </Box>\r\n            <p>Recorded Text: {voiceText}</p>\r\n            <Box mt={3}>\r\n                <Button variant=\"contained\" onClick={handleLogin}>\r\n                    {translations[language].signin}\r\n                </Button>\r\n            </Box>\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default SignIn;\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}